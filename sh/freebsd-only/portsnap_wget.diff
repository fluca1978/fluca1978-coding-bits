268c268,271
< 	PHTTPGET=/usr/libexec/phttpget
---
> 	PHTTPGET=/usr/local/bin/wget
> 
> 	echo "WARNING: this version of portsnap is using $PHTTPGET as Web-HTTP-Get program!"
> 	echo "Luca Ferrari - fluca1978 (at) gmail (dot) com"
687,690c690,695
< 	tr '|' '-' < patchlist |
< 	    lam -s "tp/" - -s ".gz" |
< 	    xargs ${XARGST} ${PHTTPGET} ${SERVERNAME}	\
< 	    2>${STATSREDIR} | fetch_progress
---
> 	# fetch metadata files using wget behind a proxy
> 	for current_file in `tr '|' '-' < patchlist | lam -s "tp/" - -s ".gz"`
> 	do
> 	    ${PHTTPGET} ${SERVERNAME}/${current_file} > /dev/null 2>&1
> 	done
> 
721,724c726,733
< 	echo ${NDEBUG} "metadata files... "
< 	lam -s "f/" - -s ".gz" < filelist |
< 	    xargs ${XARGST} ${PHTTPGET} ${SERVERNAME}	\
< 	    2>${QUIETREDIR}
---
> 	echo ${NDEBUG} "metadata files..."
> 
> 	# fetch metadata files using wget behind a proxy
> 	for current_file in `cat filelist`
> 	do
> 	    ${PHTTPGET} ${SERVERNAME}/f/${current_file}.gz  > /dev/null 2>&1
> 	done
> 	    
763,765c772,777
< 	tr '|' '-' < patchlist | lam -s "bp/" - |
< 	    xargs ${XARGST} ${PHTTPGET} ${SERVERNAME}	\
< 	    2>${STATSREDIR} | fetch_progress
---
> 
> 	# fetch metadata files using wget behind a proxy
> 	for current_file in `tr '|' '-' < patchlist | lam -s "bp/" - -s ".gz"`
> 	do
> 	    ${PHTTPGET} ${SERVERNAME}/${current_file}  > /dev/null 2>&1
> 	done
794,796c806,810
< 	lam -s "f/" - -s ".gz" < filelist |
< 	    xargs ${XARGST} ${PHTTPGET} ${SERVERNAME}	\
< 	    2>${QUIETREDIR}
---
> 	# fetch metadata files using wget behind a proxy
> 	for current_file in `lam -s "f/" - -s ".gz" < filelist`
> 	do
> 	    ${PHTTPGET} ${SERVERNAME}/${current_file}  > /dev/null 2>&1
> 	done
